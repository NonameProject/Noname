@using Abitcareer.Mvc.ViewModels.LocalizedViewModels
@using System.Web
@using System.Globalization
@using System.Web.Mvc
@using System.Text.RegularExpressions
@using System.Globalization
@model List<SpecialityViewModel>

@section styles
{
    @Styles.Render("~/Content/bootstrap.css")
    @Styles.Render("~/Content/Specialities.css")
    @Styles.Render("~/Content/Site.css")
}

<h2>@LocalizationResx.Specialities</h2>

<div id="partialView">
    <div id="inner">
        
    </div>
</div>

<div class="search">
    <input placeholder="@LocalizationResx.Search"/>
</div>

<div id="addNew" class="card col-md-4 boxShadow17">
    <span>@LocalizationResx.AddSpeciality</span>
</div>
<section class="wrapperButton">
    @foreach (var item in Model)
    {
        <div class="col-md-4 card boxShadow17 specButton" id="@item.Id">
            <div class="ttip"><span>@LocalizationResx.PressToEdit</span></div>
            <div class="name">
                @item.Name
            </div>
            <div class="salary-wrapper">
                <h4>@item.Salaries.First().Value - @item.Salaries.Last().Value</h4>
            </div>
        </div>
    }
</section>

@section Scripts
{
   <script>

       $(function () {
           $(document).ajaxStart(function () {
               $("body").toggleClass("loading");
           }).ajaxStop(function () {
               $("body").toggleClass("loading");
           })

           $('.specButton').click(function (event) {
               $("#inner").html(null);
               $("#partialView").show(0);
               event.stopPropagation();
               $.post("specialities/edit", { id: $(this).attr("id") }, function (data) {
                   $("#inner").html(data);                   
               });
           });
           $(document).click(function (event) {
               if ($(event.target).closest('#inner').length) return;
               $('#partialView').hide();
               event.stopPropagation();
           });           
       });

       $('.card:not(#addNew)').on("mouseover", function () {
           $(this.children[0]).show();
       });

       $(".card:not(#addNew)").mouseout(function () {
           $(this.children[0]).hide();
       });
       

    </script>
}